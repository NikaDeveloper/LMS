# Learning Management System (LMS) API
#### Проект представляет собой бэкенд для системы управления обучением (LMS), реализованный на Django Rest Framework.Система включает управление курсами, уроками, платежами,а также сложную систему прав доступа на основе JWT-авторизации и ролей пользователей.

### *Стек технологий:*
* **Язык:** Python 3.10+
* **Фреймворк:** Django 5.x
* **API:** Django REST Framework (DRF)
* **База данных:** PostgreSQL
* **Авторизация:** JWT (`djangorestframework-simplejwt`)
* **Платежная система:** Stripe
* **Документация API:** drf-yasg (Swagger/ReDoc)
* **Асинхронность:** Celery, Celery Beat
* **Брокер сообщений/Кэш:** Redis
* **Управление зависимостями:** pip-tools
* **Тестирование:** Unittest, APITestCase
* **Дополнительно:** django-filter, Pillow

### Ключевой функционал
#### *Авторизация и Пользователи:*

* Регистрация и вход по email.
* JWT-токены (Access/Refresh).
* **Приватность:** Скрытие фамилии и истории платежей при просмотре чужого профиля.

### Курсы и Уроки
* Полный CRUD для уроков и курсов.
* **Валидация:** Запрет на использование ссылок на сторонние ресурсы (разрешен только `youtube.com`).
* **Пагинация:** Постраничный вывод списка материалов.
* **Подписки:** Механизм подписки на обновления курса.

### Права доступа (Permissions)
* **Владелец:** Редактирует и удаляет только свои объекты.
* **Модератор:** Редактирует любые объекты, но не может удалять их или создавать новые.
* **Публичный доступ:** Закрыт (требуется авторизация).

### Платежи (Stripe)
* Интеграция со Stripe (создание продукта, цены и сессии оплаты).
* Получение ссылки на оплату.
* Проверка статуса платежа через API.
* Фильтрация истории платежей по дате и способу оплаты.

### Асинхронные операции (Celery):

* **Уведомления:** Автоматическая асинхронная рассылка писем всем подписчикам при обновлении курса.

* **Обслуживание пользователей:** Ежедневная блокировка пользователей, неактивных более 30 дней (с помощью Celery Beat)
---

## Установка и запуск проекта:
1. Клонирование репозитория
```Bash
git clone https://github.com/NikaDeveloper/LMS.git
cd LMS 
```
2. Запуск проекта через Docker

*Для запуска проекта вам понадобится установленный Docker и Docker Compose.*

* Настройка окружения

*Создайте файл .env в корне проекта и заполните его согласно шаблону **.env.example**. Важно: для работы внутри Docker используйте POSTGRES_HOST=db и REDIS_HOST=redis.*

* Запуск контейнеров

*Выполните команду для сборки и запуска всех сервисов (Django, PostgreSQL, Redis, Celery):*

```Bash
docker-compose up -d --build
```
3. Применение миграций

```Bash
docker-compose exec app python manage.py migrate
```
**Создайте суперпользователя:**

```Bash
docker-compose exec app python manage.py createsuperuser
```

**Django API:** будет доступен по адресу http://localhost:8000/

**Celery Worker:** выполняет асинхронные задачи (логи можно посмотреть командой *docker logs celery_worker*).

**Celery Beat:** отправляет периодические задачи (логи: *docker logs celery_beat*)

**Документация:**
* http://localhost:8000/swagger/
* http://localhost:8000/redoc/

*Разработчик: Nika Developer*
